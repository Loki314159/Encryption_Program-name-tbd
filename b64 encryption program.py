import base64 as b64 #base64 version of the encryption W Tkinter.py, may not keep this super updated
code="ZnJvbSB0a2ludGVyIGltcG9ydCBtZXNzYWdlYm94CmltcG9ydCBMb2dpblNjcmVlbkxpdGUgYXMgbHMKaW1wb3J0IG9zCmltcG9ydCBjdXN0b210a2ludGVyCmltcG9ydCByYW5kb20KaW1wb3J0IHNodXRpbAppbXBvcnQgVHJpZmlkIGFzIHRyZmQKaW1wb3J0IENhZXNlciBhcyBjc3IKaW1wb3J0IFJTQSBhcyByc2EKaW1wb3J0IE15QmFzZTY0IGFzIG1iNjQKaW1wb3J0IFN1YnN0aXR1dGlvbiBhcyBzdWIKIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0jCiIiIgogICAgUHVycG9zZTogY2xlYXIgb3V0IGFsbCB0aGUgYnV0dG9ucyBmb3IgZWFjaCBlbmNyeXB0aW9uIG1ldGhvZAogICAgUmVxdWlyZW1lbnQ6IGJlIGNhbGxlZAogICAgUHJvbWlzZTogYWxsIHdpZGdldHMgY2xlYXJlZCBiYXIgbWV0aG9kIGJ1dHRvbnMgYW5kIGRldGFpbHMgYnV0dG9uCiIiIgojIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSMKZGVmIGZvcmdldEFsbCgpOgogICAgY2lwaGVydGV4dEJveC5ncmlkX2ZvcmdldCgpCiAgICBjaXBoZXJ0ZXh0TGFiZWwuZ3JpZF9mb3JnZXQoKQogICAgcGxhaW50ZXh0Qm94LmdyaWRfZm9yZ2V0KCkKICAgIHBsYWludGV4dExhYmVsLmdyaWRfZm9yZ2V0KCkKICAgIGVuY3J5cHRCdXR0b24uZ3JpZF9mb3JnZXQoKQogICAgZGVjcnlwdEJ1dHRvbi5ncmlkX2ZvcmdldCgpCiAgICBlbmNyeXB0QnV0dG9uLmNvbmZpZ3VyZSh0ZXh0PSJFbmNyeXB0OiIpCiAgICBkZWNyeXB0QnV0dG9uLmNvbmZpZ3VyZSh0ZXh0PSJEZWNyeXB0OiIpCiAgICBrZXlCb3guZ3JpZF9mb3JnZXQoKQogICAga2V5TGFiZWwuZ3JpZF9mb3JnZXQoKQogICAgc2hpZnRCb3guZ3JpZF9mb3JnZXQoKQogICAgc2hpZnRMYWJlbC5ncmlkX2ZvcmdldCgpCiAgICBwdWJsaWNLZXlCb3guZ3JpZF9mb3JnZXQoKQogICAgcHVibGljS2V5TGFiZWwuZ3JpZF9mb3JnZXQoKQogICAgcHJpdmF0ZUtleUJveC5ncmlkX2ZvcmdldCgpCiAgICBwcml2YXRlS2V5TGFiZWwuZ3JpZF9mb3JnZXQoKQogICAgY2hhbmdlUGFzc3dvcmRCdXR0b24uZ3JpZF9mb3JnZXQoKQogICAgY2hhbmdlVXNlcm5hbWVCdXR0b24uZ3JpZF9mb3JnZXQoKQogICAgbmV3VXNlckJ1dHRvbi5ncmlkX2ZvcmdldCgpCiAgICB1c2VybmFtZUJveC5ncmlkX2ZvcmdldCgpCiAgICB1c2VybmFtZUxhYmVsLmdyaWRfZm9yZ2V0KCkKICAgIHBhc3N3b3JkQm94LmdyaWRfZm9yZ2V0KCkKICAgIHBhc3N3b3JkTGFiZWwuZ3JpZF9mb3JnZXQoKQogICAgVUlEQm94LmdyaWRfZm9yZ2V0KCkKICAgIFVJRExhYmVsLmdyaWRfZm9yZ2V0KCkKICAgIHJlbW92ZVVzZXJCdXR0b24uZ3JpZF9mb3JnZXQoKQogICAgZ2V0VUlEQnV0dG9uLmdyaWRfZm9yZ2V0KCkKCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIwoiIiIKICAgIFB1cnBvc2U6IG1ha2UgYWxsIGJ1dHRvbnMgbGlnaHQgYmx1ZSB0byBhbGxvdyB0aGUgZm9jdXNlZCBtZXRob2QgYmUgdHVybmVkIGRhcmsgYmx1ZSBhbmQgZm9jdXNlZAogICAgUmVxdWlyZW1lbnQ6IGJlIGNhbGxlZAogICAgUHJvbWlzZTogYWxsIGJ1dHRvbnMgd2lsbCBiZSB0dXJuZWQgbGlnaHQgYmx1ZQoiIiIKIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0jCmRlZiBibHVlQnV0dG9ucygpOgogICAgdHJpZmlkQnV0dG9uLmNvbmZpZ3VyZShmZ19jb2xvcj0iIzNmNTc5OSIsIHRleHRfY29sb3I9ImJsYWNrIikKICAgIGNhZXNhckJ1dHRvbi5jb25maWd1cmUoZmdfY29sb3I9IiMzZjU3OTkiLCB0ZXh0X2NvbG9yPSJibGFjayIpCiAgICBSU0FCdXR0b24uY29uZmlndXJlKGZnX2NvbG9yPSIjM2Y1Nzk5IiwgdGV4dF9jb2xvcj0iYmxhY2siKQogICAgYjY0QnV0dG9uLmNvbmZpZ3VyZShmZ19jb2xvcj0iIzNmNTc5OSIsIHRleHRfY29sb3I9ImJsYWNrIikKICAgIHN1YnN0aXR1dGlvbkJ1dHRvbi5jb25maWd1cmUoZmdfY29sb3I9IiMzZjU3OTkiLCB0ZXh0X2NvbG9yPSJibGFjayIpCiAgICBjaGFuZ2VEZXRhaWxzQnV0dG9uLmNvbmZpZ3VyZShmZ19jb2xvcj0iIzNmNTc5OSIsIHRleHRfY29sb3I9ImJsYWNrIikKCmRlZiB1c2VybmFtZUV4aXN0cyh1c2VybmFtZSk6CiAgICB3aXRoIG9wZW4oImNyZWRlbnRpYWxzLnR4dCIsICJyIikgYXMgY3JlZGVudGlhbHNGaWxlOgogICAgICAgIHVzZXJuYW1lRXhpc3RzPUZhbHNlCiAgICAgICAgdHJ5OgogICAgICAgICAgICBmb3IgbGluZSBpbiBjcmVkZW50aWFsc0ZpbGU6CiAgICAgICAgICAgICAgICBsaW5lID0gbGluZS5zcGxpdCgifCIsIDIpCiAgICAgICAgICAgICAgICBpZiB1c2VybmFtZSA9PSBsaW5lWzBdLnJlcGxhY2UoJ1xuJywgJycpOgogICAgICAgICAgICAgICAgICAgIHVzZXJuYW1lRXhpc3RzPVRydWUKICAgICAgICBleGNlcHQgVW5ib3VuZExvY2FsRXJyb3I6CiAgICAgICAgICAgIG1lc3NhZ2Vib3guc2hvd3dhcm5pbmcoIlVuYm91bmQgTG9jYWwgRXJyb3IiLCJWZXJpZnkgdXNlciBpbnB1dHMgYXJlIGFjY3VyYXRlIikKICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgIG1lc3NhZ2Vib3guc2hvd3dhcm5pbmcoIkdlbmVyaWMgRXJyb3IiLGYiRXJyb3Igb2NjdXJlZDoge3N0cihlKX0iKQogICAgcmV0dXJuIHVzZXJuYW1lRXhpc3RzCgpkZWYgcGlwZUNoZWNrKHRleHQpOgogICAgZm9yIGkgaW4gdGV4dDoKICAgICAgICBpZiBpID09ICJ8IjoKICAgICAgICAgICAgcmV0dXJuIFRydWUKICAgIHJldHVybiBGYWxzZQojIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSMKIiIiCiAgICBQdXJwb3NlOiBHZW5lcmF0ZSBSU0Ega2V5cyB1c2luZyBSU0EucHkgcHJvdmlkZWQgaW4gYXNzZXNzbWVudCBmaWxlcwogICAgUmVxdWlyZW1lbnQ6IGJlIGNhbGxlZCB3aGlsZSBlbmNyeXB0aW5nL2RlY3J5cHRpbmcKICAgIFByb21pc2U6IGdlbmVyYXRlIFJTQSBrZXlzIGlmIHRoZXJlIGFyZW4ndCBhbnkgY3VycmVudGx5CiIiIgojIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSMKZGVmIFJTQUdlbktleXMoKToKICAgIGlmIHByaXZhdGVLZXlCb3guZ2V0KCkgYW5kIHB1YmxpY0tleUJveC5nZXQoKToKICAgICAgICByZXR1cm4gcHJpdmF0ZUtleUJveC5nZXQoKSwgcHVibGljS2V5Qm94LmdldCgpCiAgICBwcml2YXRlS2V5LCBwdWJsaWNLZXkgPSByc2EubWFrZVJTQUtleSgpCiAgICBwcml2YXRlS2V5Qm94LmRlbGV0ZSgwLCAiZW5kIikjIHRoaXMgd2lsbCBkZWxldGUgZXZlcnl0aGluZyBpbiB0aGUgRW50cnkgYm94IGZyb20gdGhlIHN0YXJ0ICgwKSB0byB0aGUgZW5kCiAgICBwcml2YXRlS2V5Qm94Lmluc2VydCgwLCBwcml2YXRlS2V5KSMgdGhpcyB3aWxsIHBsYWNlIHRoZSBwcml2YXRlS2V5IGluIHRoZSBwcml2YXRla2V5Ym94IGF0IHRoZSBzdGFydCAoMCkKICAgIHB1YmxpY0tleUJveC5kZWxldGUoMCwgImVuZCIpCiAgICBwdWJsaWNLZXlCb3guaW5zZXJ0KDAsIHB1YmxpY0tleSkKICAgIHJldHVybiBwcml2YXRlS2V5LCBwdWJsaWNLZXkgIyByZXR1cm5zIGJvdGgga2V5cyB0byB0aGUgb3BlcmF0aW9uIHRoYXQgY2FsbGVkIHRoZSBmdW5jdGlvbgoKZGVmIHRyaWZpZEdlbktleXMoKToKICAgIGlmIGtleUJveC5nZXQoKToKICAgICAgICByZXR1cm4ga2V5Qm94LmdldCgpCiAgICBrZXkgPSBsaXN0KCIiIiAhIiMkJSYnKCkqKywtLi8wMTIzNDU2Nzg5Ojs8PT4/QEFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaW1xcXV5fYGFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6e3x9fsKhwqLCo8KkwqXCpsKnwqjCqcKqwqvCrMKvwrDCscKyw57CtcK2wrfFk8K5wrrCu8K84oCUwr3Cv8i9XG4iIiIpCiAgICByYW5kb20uc2h1ZmZsZShrZXkpCiAgICBrZXk9Jycuam9pbihrZXkpCiAgICBrZXlCb3guZGVsZXRlKDAsICJlbmQiKSMgdGhpcyB3aWxsIGRlbGV0ZSBldmVyeXRoaW5nIGluIHRoZSBrZXkgYm94IGZyb20gdGhlIHN0YXJ0ICgwKSB0byB0aGUgZW5kCiAgICBrZXlCb3guaW5zZXJ0KDAsIGtleS5yZXBsYWNlKCJcbiIsICLimaUiKSkjIHRoaXMgd2lsbCBwbGFjZSB0aGUga2V5IGluIHRoZSBrZXkgYm94IGF0IHRoZSBzdGFydCAoMCkKICAgIHJldHVybiBrZXkKCmRlZiBjYWVzZXJHZW5TaGlmdCgpOgogICAgaWYgc2hpZnRCb3guZ2V0KCk6CiAgICAgICAgcmV0dXJuIGludChzaGlmdEJveC5nZXQoKSkKICAgIHJhbmROdW09cmFuZG9tLnJhbmRpbnQoMCwgOTk5KQogICAgc2hpZnRCb3guZGVsZXRlKDAsICJlbmQiKSMgdGhpcyB3aWxsIGRlbGV0ZSBldmVyeXRoaW5nIGluIHRoZSBFbnRyeSBib3ggZnJvbSB0aGUgc3RhcnQgKDApIHRvIHRoZSBlbmQKICAgIHNoaWZ0Qm94Lmluc2VydCgwLCByYW5kTnVtKSMgdGhpcyB3aWxsIHBsYWNlIHRoZSBzaGlmdCBpbiB0aGUgc2hpZnQgYm94IGF0IHRoZSBzdGFydCAoMCkKICAgIHJldHVybiByYW5kTnVtCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIwoiIiIKICAgIFB1cnBvc2U6IFJlbW92ZSB0aGUgbmV3bGluZSBjaGFyYWN0ZXIgYXQgdGhlIGVuZCBvZiBhbiBpbnB1dCBwYXJzZWQgdGhyb3VnaCBhIFRleHQgd2lkZ2V0LCB0aGlzIGlzIG5vdCBuZWVkZWQgZm9yIHVzZXIgaW5wdXRzIGZyb20gRW50cnkgd2lkZ2V0cwogICAgUmVxdWlyZW1lbnQ6IGJlIGNhbGxlZCBhZnRlciBwYXJzaW5nIGlucHV0IGZyb20gYW4gRW50cnkgd2lkZ2V0CiAgICBQcm9taXNlOiByZW1vdmUgdGhlIHVubmVjZXNzYXJ5IChzb21ldGltZXMgcHJvYmxlbWF0aWMpIG5ld2xpbmUgY2hhcmFjdGVyIGZyb20gaW5wdXRzCiIiIgojIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSMKZGVmIFRleHRib3hmb3JtYXR0ZXIodGV4dCk6CiAgICBhbHRlcmVkVGV4dExpc3Q9bGlzdCh0ZXh0KSAjIHR1cm4gdGhlIHRlc3QgaW50byBhIGxpc3QKICAgIGFsdGVyZWRUZXh0TGlzdC5wb3AoLTEpICMgcmVtb3ZlIHRoZSBmaW5hbCBjaGFyYWN0ZXIgKHdoaWNoIHdpbGwgYWx3YXlzIGJlIGEgbmV3bGluZSkKICAgIGFsdGVyZWRUZXh0PSIiLmpvaW4oYWx0ZXJlZFRleHRMaXN0KSAjIHB1dCB0aGUgbGlzdCBiYWNrIGludG8gYmVpbmcgYSBzdHJpbmcKICAgIHJldHVybiBhbHRlcmVkVGV4dAojIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSMKIiIiCiAgICBQdXJwb3NlOiBzZXQgd2lkZ2V0cyB0byBiZSBmb3IgdGhlIHRyaWZpZCBtZXRob2QKICAgIFJlcXVpcmVtZW50OiBUcmlmaWQgYnV0dG9uIHByZXNzZWQKICAgIFByb21pc2U6IGluaXRpYWxpc2UgdHJpZmlkIGFuZCBjb21tb24gd2lkZ2V0cwoiIiIKIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0jCmRlZiB0cmlmaWQoKToKICAgIGZvcmdldEFsbCgpCiAgICBibHVlQnV0dG9ucygpCiAgICB0cmlmaWRCdXR0b24uY29uZmlndXJlKGZnX2NvbG9yPSIjM2Y1Nzk5IiwgdGV4dF9jb2xvcj0id2hpdGUiKQogICAgZGVjcnlwdEJ1dHRvbi5jb25maWd1cmUoY29tbWFuZD1jYWxsVHJpZmlkRGVjcnlwdCkKICAgIGVuY3J5cHRCdXR0b24uY29uZmlndXJlKGNvbW1hbmQ9Y2FsbFRyaWZpZEVuY3J5cHQpIyBjaGFuZ2VzIHRoZSBjb25maWd1cmF0aW9uIG9mIHRoZSBidXR0b24gc28gdGhhdCBpdCBjYWxscyB0aGUgc3BlY2lmaWVkIGNvbW1hbmQKICAgIGtleUxhYmVsLmdyaWQoY29sdW1uPTEsIHJvdz0yLCBzdGlja3k9Im53IikKICAgIGtleUJveC5ncmlkKGNvbHVtbj0xLCByb3c9Miwgc3RpY2t5PSJ3ZSIpCiAgICBlbmNyeXB0QnV0dG9uLmdyaWQoY29sdW1uPTEsIHJvdz0xLCBzdGlja3k9InMiKSAjIHBsYWNlcyB0aGUgd2lkZ2V0IGluIHRoZSBzcGVjaWZpZWQgY29sdW1uIGFuZCByb3cgd2hlcmUgaXQgd2lsbCBiZSBhbGxpZ25lZCB0byB0aGUgY2FyZGluYWwgZGlyZWN0aW9uIHNwZWNpZmllZAogICAgZGVjcnlwdEJ1dHRvbi5ncmlkKGNvbHVtbj0xLCByb3c9Mywgc3RpY2t5PSJuIikKICAgIGNpcGhlcnRleHRCb3guZ3JpZChjb2x1bW49MSwgcm93PTQpICMgZHVlIHRvIGxhY2sgb2Ygc3RpY2t5IGl0IHdpbGwgYmUgaW4gdGhlIGNlbnRyZQogICAgY2lwaGVydGV4dExhYmVsLmdyaWQoY29sdW1uPTEsIHJvdz00LCBzdGlja3k9Im53IikKICAgIHBsYWludGV4dEJveC5ncmlkKGNvbHVtbj0xLCByb3c9MCkKICAgIHBsYWludGV4dExhYmVsLmdyaWQoY29sdW1uPTEsIHJvdz0wLCBzdGlja3k9Im53IikKIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0jCiIiIgogICAgUHVycG9zZTogc2V0IHdpZGdldHMgdG8gYmUgZm9yIHRoZSBjYWVzYXIgbWV0aG9kCiAgICBSZXF1aXJlbWVudDogQ2Flc2FyIGJ1dHRvbiBwcmVzc2VkCiAgICBQcm9taXNlOiBpbml0aWFsaXNlIGNhZXNhciBhbmQgY29tbW9uIHdpZGdldHMKIiIiCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIwpkZWYgY2Flc2FyKCk6CiAgICBmb3JnZXRBbGwoKQogICAgYmx1ZUJ1dHRvbnMoKQogICAgY2Flc2FyQnV0dG9uLmNvbmZpZ3VyZShmZ19jb2xvcj0iIzNmNTc5OSIsIHRleHRfY29sb3I9IndoaXRlIikKICAgIGRlY3J5cHRCdXR0b24uY29uZmlndXJlKGNvbW1hbmQ9Y2FsbENhZXNhckRlY3J5cHQpCiAgICBlbmNyeXB0QnV0dG9uLmNvbmZpZ3VyZShjb21tYW5kPWNhbGxDYWVzYXJFbmNyeXB0KQogICAgc2hpZnRCb3guZ3JpZChjb2x1bW49MSwgcm93PTIpCiAgICBzaGlmdExhYmVsLmdyaWQoY29sdW1uPTEsIHJvdz0yLCBzdGlja3k9Im53IikKICAgIGVuY3J5cHRCdXR0b24uZ3JpZChjb2x1bW49MSwgcm93PTEsIHN0aWNreT0icyIpCiAgICBkZWNyeXB0QnV0dG9uLmdyaWQoY29sdW1uPTEsIHJvdz0zLCBzdGlja3k9Im4iKQogICAgY2lwaGVydGV4dEJveC5ncmlkKGNvbHVtbj0xLCByb3c9NCkKICAgIGNpcGhlcnRleHRMYWJlbC5ncmlkKGNvbHVtbj0xLCByb3c9NCwgc3RpY2t5PSJudyIpCiAgICBwbGFpbnRleHRCb3guZ3JpZChjb2x1bW49MSwgcm93PTApCiAgICBwbGFpbnRleHRMYWJlbC5ncmlkKGNvbHVtbj0xLCByb3c9MCwgc3RpY2t5PSJudyIpCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIwoiIiIKICAgIFB1cnBvc2U6IHNldCB3aWRnZXRzIHRvIGJlIGZvciB0aGUgUlNBIG1ldGhvZAogICAgUmVxdWlyZW1lbnQ6IFJTQSBidXR0b24gcHJlc3NlZAogICAgUHJvbWlzZTogaW5pdGlhbGlzZSBSU0EgYW5kIGNvbW1vbiB3aWRnZXRzCiIiIgojIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSMKZGVmIFJTQSgpOgogICAgZm9yZ2V0QWxsKCkKICAgIGJsdWVCdXR0b25zKCkKICAgIFJTQUJ1dHRvbi5jb25maWd1cmUoZmdfY29sb3I9IiMzZjU3OTkiLCB0ZXh0X2NvbG9yPSJ3aGl0ZSIpCiAgICBkZWNyeXB0QnV0dG9uLmNvbmZpZ3VyZShjb21tYW5kPWNhbGxSU0FQcml2RGVjcnlwdCwgdGV4dD0iUHJpdiBEZWNyeXB0IikKICAgIGVuY3J5cHRCdXR0b24uY29uZmlndXJlKGNvbW1hbmQ9Y2FsbFJTQVB1YkVuY3J5cHQsIHRleHQ9IlB1YiBFbmNyeXB0IikKICAgIGRlY3J5cHRCdXR0b24uZ3JpZChjb2x1bW49MSwgcm93PTIsIHN0aWNreT0icyIpCiAgICBlbmNyeXB0QnV0dG9uLmdyaWQoY29sdW1uPTEsIHJvdz0yLCBzdGlja3k9Im4iKQogICAgcHVibGljS2V5Qm94LmdyaWQoY29sdW1uPTEsIHJvdz0xKQogICAgcHVibGljS2V5TGFiZWwuZ3JpZChjb2x1bW49MSwgcm93PTEsIHN0aWNreT0ibnciKQogICAgcHJpdmF0ZUtleUJveC5ncmlkKGNvbHVtbj0xLCByb3c9MykKICAgIHByaXZhdGVLZXlMYWJlbC5ncmlkKGNvbHVtbj0xLCByb3c9Mywgc3RpY2t5PSJudyIpCiAgICBjaXBoZXJ0ZXh0Qm94LmdyaWQoY29sdW1uPTEsIHJvdz00KQogICAgY2lwaGVydGV4dExhYmVsLmdyaWQoY29sdW1uPTEsIHJvdz00LCBzdGlja3k9Im53IikKICAgIHBsYWludGV4dEJveC5ncmlkKGNvbHVtbj0xLCByb3c9MCkKICAgIHBsYWludGV4dExhYmVsLmdyaWQoY29sdW1uPTEsIHJvdz0wLCBzdGlja3k9Im53IikKIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0jCiIiIgogICAgUHVycG9zZTogc2V0IHdpZGdldHMgdG8gYmUgZm9yIHRoZSBiYXNlNjQgbWV0aG9kCiAgICBSZXF1aXJlbWVudDogYmFzZTY0IGJ1dHRvbiBwcmVzc2VkCiAgICBQcm9taXNlOiBpbml0aWFsaXNlIGJhc2U2NCBhbmQgY29tbW9uIHdpZGdldHMKIiIiCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIwpkZWYgYmFzZTY0KCk6CiAgICBmb3JnZXRBbGwoKQogICAgYmx1ZUJ1dHRvbnMoKQogICAgYjY0QnV0dG9uLmNvbmZpZ3VyZShmZ19jb2xvcj0iIzNmNTc5OSIsIHRleHRfY29sb3I9IndoaXRlIikKICAgIGRlY3J5cHRCdXR0b24uY29uZmlndXJlKGNvbW1hbmQ9Y2FsbEJhc2U2NERlY3J5cHQpCiAgICBlbmNyeXB0QnV0dG9uLmNvbmZpZ3VyZShjb21tYW5kPWNhbGxCYXNlNjRFbmNyeXB0KQogICAgZW5jcnlwdEJ1dHRvbi5ncmlkKGNvbHVtbj0xLCByb3c9MSwgc3RpY2t5PSJzIikKICAgIGRlY3J5cHRCdXR0b24uZ3JpZChjb2x1bW49MSwgcm93PTMsIHN0aWNreT0ibiIpCiAgICBjaXBoZXJ0ZXh0Qm94LmdyaWQoY29sdW1uPTEsIHJvdz00KQogICAgY2lwaGVydGV4dExhYmVsLmdyaWQoY29sdW1uPTEsIHJvdz00LCBzdGlja3k9Im53IikKICAgIHBsYWludGV4dEJveC5ncmlkKGNvbHVtbj0xLCByb3c9MCkKICAgIHBsYWludGV4dExhYmVsLmdyaWQoY29sdW1uPTEsIHJvdz0wLCBzdGlja3k9Im53IikKIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0jCiIiIgogICAgUHVycG9zZTogc2V0IHdpZGdldHMgdG8gYmUgZm9yIHRoZSBzdWJzdGl0dXRpb24gbWV0aG9kCiAgICBSZXF1aXJlbWVudDogU3Vic3RpdHV0aW9uIGJ1dHRvbiBwcmVzc2VkCiAgICBQcm9taXNlOiBpbml0aWFsaXNlIHN1YnN0aXR1dGlvbiBhbmQgY29tbW9uIHdpZGdldHMKIiIiCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIwpkZWYgc3Vic3RpdHV0aW9uKCk6CiAgICBmb3JnZXRBbGwoKQogICAgYmx1ZUJ1dHRvbnMoKQogICAgc3Vic3RpdHV0aW9uQnV0dG9uLmNvbmZpZ3VyZShmZ19jb2xvcj0iIzNmNTc5OSIsIHRleHRfY29sb3I9IndoaXRlIikKICAgIGRlY3J5cHRCdXR0b24uY29uZmlndXJlKGNvbW1hbmQ9Y2FsbFN1YnN0aXR1dGlvbkRlY3J5cHQpCiAgICBlbmNyeXB0QnV0dG9uLmNvbmZpZ3VyZShjb21tYW5kPWNhbGxTdWJzdGl0dXRpb25FbmNyeXB0KQogICAgZW5jcnlwdEJ1dHRvbi5ncmlkKGNvbHVtbj0xLCByb3c9MSwgc3RpY2t5PSJzIikKICAgIGRlY3J5cHRCdXR0b24uZ3JpZChjb2x1bW49MSwgcm93PTMsIHN0aWNreT0ibiIpCiAgICBjaXBoZXJ0ZXh0Qm94LmdyaWQoY29sdW1uPTEsIHJvdz00KQogICAgY2lwaGVydGV4dExhYmVsLmdyaWQoY29sdW1uPTEsIHJvdz00LCBzdGlja3k9Im53IikKICAgIHBsYWludGV4dEJveC5ncmlkKGNvbHVtbj0xLCByb3c9MCkKICAgIHBsYWludGV4dExhYmVsLmdyaWQoY29sdW1uPTEsIHJvdz0wLCBzdGlja3k9Im53IikKIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0jCiIiIgogICAgUHVycG9zZTogc2V0IHdpZGdldHMgZm9yIHVzZXIgbWFuYWdlbWVudAogICAgUmVxdWlyZW1lbnQ6IGRldGFpbHMgYnV0dG9uIHByZXNzZWQKICAgIFByb21pc2U6IGluaXRpYWxpc2UgZGV0YWlscyBhbmQgY29tbW9uIHdpZGdldHMKIiIiCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIwpkZWYgY2hhbmdlRGV0YWlscygpOgogICAgZm9yZ2V0QWxsKCkKICAgIGJsdWVCdXR0b25zKCkKICAgIGNoYW5nZURldGFpbHNCdXR0b24uY29uZmlndXJlKGZnX2NvbG9yPSIjM2Y1Nzk5IiwgdGV4dF9jb2xvcj0id2hpdGUiKQogICAgdXNlcm5hbWVCb3guZ3JpZChjb2x1bW49MSwgcm93PTApCiAgICB1c2VybmFtZUxhYmVsLmdyaWQoY29sdW1uPTEsIHJvdz0wLCBzdGlja3k9Im53IikKICAgIHBhc3N3b3JkQm94LmdyaWQoY29sdW1uPTEsIHJvdz0xKQogICAgcGFzc3dvcmRMYWJlbC5ncmlkKGNvbHVtbj0xLCByb3c9MSwgc3RpY2t5PSJudyIpCiAgICBVSURCb3guZ3JpZChjb2x1bW49MSwgcm93PTIpCiAgICBVSURMYWJlbC5ncmlkKGNvbHVtbj0xLCByb3c9Miwgc3RpY2t5PSJudyIpCiAgICAKICAgIGNoYW5nZVBhc3N3b3JkQnV0dG9uLmdyaWQoY29sdW1uPSIxIiwgcm93PSIzIiwgc3RpY2t5PSJuZXciKQogICAgY2hhbmdlVXNlcm5hbWVCdXR0b24uZ3JpZChjb2x1bW49IjEiLCByb3c9IjMiLCBzdGlja3k9InNldyIpCiAgICBnZXRVSURCdXR0b24uZ3JpZChjb2x1bW49IjEiLCByb3c9IjMiLCBzdGlja3k9ImV3IikKICAgIG5ld1VzZXJCdXR0b24uZ3JpZChjb2x1bW49IjEiLCByb3c9IjQiLCBzdGlja3k9Im5ldyIpCiAgICByZW1vdmVVc2VyQnV0dG9uLmdyaWQoY29sdW1uPSIxIiwgcm93PSI0Iiwgc3RpY2t5PSJldyIpCgojIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSMKIiIiCiAgICBQdXJwb3NlOiBjYWxsIHRoZSB0cmlmaWRFbmNyeXB0IGZ1bmN0aW9uIGFuZCBwYXNzIGlzIHRleHQgZnJvbSB0aGUgcGxhaW50ZXh0IGJveCBhbmQgdGhlIGtleSBmcm9tIHRoZSBrZXkgYm94CiAgICBSZXF1aXJlbWVudDogRW5jcnlwdCBidXR0b24gYmUgcHJlc3NlZAogICAgUHJvbWlzZTogaW5zZXJ0IGVuY3J5cHRlZCB0ZXh0IGludG8gdGhlIGNpcGhlcnRleHQgYm94CiIiIgojIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSMKZGVmIGNhbGxUcmlmaWRFbmNyeXB0KCk6ICMgISIjJCUmJygpKissLS4vMDEyMzQ1Njc4OTo7PD0+P0BBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWltcXV5fYGFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6e3x9fsKhwqLCo8KkwqXCpsKnwqjCqcKqwqvCrMKvwrDCscKyw57CtcK2wrfFk8K5wrrCu8K84oCUwr3Cv8i94pmlCiAgICBpZiBub3QgVGV4dGJveGZvcm1hdHRlcihwbGFpbnRleHRCb3guZ2V0KCIwLjAiLCAiZW5kIikpOgogICAgICAgIG1lc3NhZ2Vib3guc2hvd3dhcm5pbmcoIlBsYWludGV4dCBFbXB0eSIsIkNhbm5vdCBlbmNyeXB0IG5vdGhpbmciKQogICAgICAgIHJldHVybgogICAgY2lwaGVydGV4dD0iIiAgICMgZXhhbXBsZSBrZXleXl4KICAgIHBsYWludGV4dD1UZXh0Ym94Zm9ybWF0dGVyKHBsYWludGV4dEJveC5nZXQoIjAuMCIsICJlbmQiKSkgIyBnZXRzIHRoZSB0ZXh0IGZyb20gdGhlIHBsYWludGV4dCBUZXh0IGZpZWxkIGJlZm9yZSByZW1vdmluZyB0aGUgdW5uZWNlc3NhcnkgbmV3bGluZSBjaGFyYWN0ZXIgdG8gYXZvaWQgaW5jb3JyZWN0IGVuY3J5cHRpb24KICAgIGtleT10cmlmaWRHZW5LZXlzKCkKICAgIGNpcGhlcnRleHQgPSB0cmZkLnRyaWZpZEVuY3J5cHQoa2V5LCBwbGFpbnRleHQpCiAgICBjaXBoZXJ0ZXh0Qm94LmRlbGV0ZSgiMC4wIiwgImVuZCIpICMgdGhlIGZvcm1hdHRpbmcgdG8gZGVsZXRlIHRoaW5ncyBmcm9tIFRleHQgd2lkZ2V0cyBpcyBzbGlnaHRseSBkaWZmZXJlbnQgdG8gRW50cnkgd2lkZ2V0cyBhcyBzaG93biBwcmV2aW91c2x5LCB0aGlzIGRlbGV0ZXMgZXZlcnl0aGluZyBpbiBpdAogICAgY2lwaGVydGV4dEJveC5pbnNlcnQoIjAuMCIsIGNpcGhlcnRleHQpICMgc2ltaWxhciBkaWZmZXJlbmNlIGhlcmUsIGp1c3QgaW5zZXJ0cyBjaXBoZXJ0ZXh0CiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIwoiIiIKICAgIFB1cnBvc2U6IEVuY3J5cHQgcGxhaW50ZXh0IHdpdGggY2Flc2FyIG1ldGhvZAogICAgUmVxdWlyZW1lbnQ6IEVuY3J5cHQgYnV0dG9uIGJlIHByZXNzZWQsIHRoZXJlIGlzIGEgcGxhaW50ZXh0IHRvIGVuY3J5cHQsIHNoaWZ0IGlzIG5vdCBudWxsCiAgICBQcm9taXNlOiBwbGFjZSBlbmNyeXB0ZWQgcGxhaW50ZXh0IGluIGNpcGhlcnRleHQgYm94CiIiIgojIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSMKZGVmIGNhbGxDYWVzYXJFbmNyeXB0KCk6CiAgICBpZiBub3QgVGV4dGJveGZvcm1hdHRlcihwbGFpbnRleHRCb3guZ2V0KCIwLjAiLCAiZW5kIikpOgogICAgICAgIG1lc3NhZ2Vib3guc2hvd3dhcm5pbmcoIlBsYWludGV4dCBFbXB0eSIsIkNhbm5vdCBlbmNyeXB0IG5vdGhpbmciKQogICAgICAgIHJldHVybgogICAgc2hpZnQ9Y2Flc2VyR2VuU2hpZnQoKSAjZ3JhYiBrZXkgYW5kIG1ha2Ugc3VyZSBJIGNhbiBkbyBtYXRoIHdpdGggaXQKICAgIHBsYWludGV4dD1UZXh0Ym94Zm9ybWF0dGVyKHBsYWludGV4dEJveC5nZXQoIjAuMCIsICJlbmQiKSkKICAgIGNpcGhlcnRleHQ9Y3NyLmNhZXNhckVuY3J5cHQoc2hpZnQsIHBsYWludGV4dCkKICAgIGNpcGhlcnRleHRCb3guZGVsZXRlKCIwLjAiLCAiZW5kIikKICAgIGNpcGhlcnRleHRCb3guaW5zZXJ0KCIwLjAiLCBjaXBoZXJ0ZXh0KQojIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSMKIiIiCiAgICBQdXJwb3NlOiBFbmNyeXB0IHBsYWludGV4dCB3aXRoIFJTQSBtZXRob2QgdXNpbmcgdGhlIHB1YmxpYyBrZXkKICAgIFJlcXVpcmVtZW50OiBFbmNyeXB0IGJ1dHRvbiBiZSBwcmVzc2VkLCB0aGVyZSBpcyBhIHBsYWludGV4dCB0byBlbmNyeXB0CiAgICBQcm9taXNlOiBwbGFjZSBlbmNyeXB0ZWQgcGxhaW50ZXh0IGluIGNpcGhlcnRleHQgYm94CiIiIgojIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSMKZGVmIGNhbGxSU0FQdWJFbmNyeXB0KCk6CiAgICBpZiBub3QgVGV4dGJveGZvcm1hdHRlcihwbGFpbnRleHRCb3guZ2V0KCIwLjAiLCAiZW5kIikpOgogICAgICAgIG1lc3NhZ2Vib3guc2hvd3dhcm5pbmcoIlBsYWludGV4dCBFbXB0eSIsIkNhbm5vdCBlbmNyeXB0IG5vdGhpbmciKQogICAgICAgIHJldHVybgogICAgcHJpdmF0ZUtleSwgcHVibGljS2V5ID0gUlNBR2VuS2V5cygpCiAgICBwbGFpbnRleHQ9VGV4dGJveGZvcm1hdHRlcihwbGFpbnRleHRCb3guZ2V0KCIwLjAiLCAiZW5kIikpCiAgICBjaXBoZXJ0ZXh0ID0gcnNhLlJTQVB1YkVuY3J5cHQocHVibGljS2V5LCBwbGFpbnRleHQpCiAgICBjaXBoZXJ0ZXh0Qm94LmRlbGV0ZSgiMC4wIiwgImVuZCIpCiAgICBjaXBoZXJ0ZXh0Qm94Lmluc2VydCgiMC4wIiwgY2lwaGVydGV4dCkKIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0jCiIiIgogICAgUHVycG9zZTogRW5jcnlwdCBwbGFpbnRleHQgd2l0aCBiYXNlIDY0IG1ldGhvZAogICAgUmVxdWlyZW1lbnQ6IEVuY3J5cHQgYnV0dG9uIGJlIHByZXNzZWQsIHRoZXJlIGlzIGEgcGxhaW50ZXh0IHRvIGVuY3J5cHQKICAgIFByb21pc2U6IHBsYWNlIGVuY3J5cHRlZCBwbGFpbnRleHQgaW4gY2lwaGVydGV4dCBib3gKIiIiCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIwpkZWYgY2FsbEJhc2U2NEVuY3J5cHQoKToKICAgIGlmIG5vdCBUZXh0Ym94Zm9ybWF0dGVyKHBsYWludGV4dEJveC5nZXQoIjAuMCIsICJlbmQiKSk6CiAgICAgICAgbWVzc2FnZWJveC5zaG93d2FybmluZygiUGxhaW50ZXh0IEVtcHR5IiwiQ2Fubm90IGVuY3J5cHQgbm90aGluZyIpCiAgICAgICAgcmV0dXJuCiAgICBjaXBoZXJ0ZXh0PSIiCiAgICBwbGFpbnRleHQ9VGV4dGJveGZvcm1hdHRlcihwbGFpbnRleHRCb3guZ2V0KCIwLjAiLCAiZW5kIikpCiAgICBjaXBoZXJ0ZXh0PW1iNjQuYmFzZTY0RW5jcnlwdChwbGFpbnRleHQpCiAgICBjaXBoZXJ0ZXh0Qm94LmRlbGV0ZSgiMC4wIiwgImVuZCIpCiAgICBjaXBoZXJ0ZXh0Qm94Lmluc2VydCgiMC4wIiwgY2lwaGVydGV4dCkKIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0jCiIiIgogICAgUHVycG9zZTogRW5jcnlwdCBwbGFpbnRleHQgd2l0aCBzdWJzdGl0dXRpb24gbWV0aG9kCiAgICBSZXF1aXJlbWVudDogRW5jcnlwdCBidXR0b24gYmUgcHJlc3NlZCwgdGhlcmUgaXMgYSBwbGFpbnRleHQgdG8gZW5jcnlwdAogICAgUHJvbWlzZTogcGxhY2UgZW5jcnlwdGVkIHBsYWludGV4dCBpbiBjaXBoZXJ0ZXh0IGJveAoiIiIKIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0jCmRlZiBjYWxsU3Vic3RpdHV0aW9uRW5jcnlwdCgpOgogICAgaWYgbm90IFRleHRib3hmb3JtYXR0ZXIocGxhaW50ZXh0Qm94LmdldCgiMC4wIiwgImVuZCIpKToKICAgICAgICBtZXNzYWdlYm94LnNob3d3YXJuaW5nKCJQbGFpbnRleHQgRW1wdHkiLCJDYW5ub3QgZW5jcnlwdCBub3RoaW5nIikKICAgICAgICByZXR1cm4KICAgIGNpcGhlcnRleHQ9IiIKICAgIHBsYWludGV4dD1UZXh0Ym94Zm9ybWF0dGVyKHBsYWludGV4dEJveC5nZXQoIjAuMCIsICJlbmQiKSkKICAgIGNpcGhlcnRleHQ9c3ViLnN1YnN0aXR1dGlvbkVuY3J5cHQocGxhaW50ZXh0KQogICAgY2lwaGVydGV4dEJveC5kZWxldGUoIjAuMCIsICJlbmQiKQogICAgY2lwaGVydGV4dEJveC5pbnNlcnQoIjAuMCIsIGNpcGhlcnRleHQpCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIwoiIiIKICAgIFB1cnBvc2U6IERlY3J5cHQgY2lwaGVydGV4dCB3aXRoIHRyaWZpZCBtZXRob2QKICAgIFJlcXVpcmVtZW50OiBEZWNyeXB0IGJ1dHRvbiBiZSBwcmVzc2VkLCB0aGVyZSBpcyBhIGNpcGhlcnRleHQgdG8gZGVjcnlwdCwga2V5IGlzIHRoZSBzYW1lIGFzIHRoZSBvbmUgdXNlZCB0byBlbmNyeXB0CiAgICBQcm9taXNlOiBwbGFjZSBkZWNyeXB0ZWQgY2lwaGVydGV4dCBpbiBwbGFpbnRleHQgYm94CiIiIgojIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSMKZGVmIGNhbGxUcmlmaWREZWNyeXB0KCk6ICMgISIjJCUmJygpKissLS4vMDEyMzQ1Njc4OTo7PD0+P0BBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWltcXV5fYGFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6e3x9fsKhwqLCo8KkwqXCpsKnwqjCqcKqwqvCrMKvwrDCscKyw57CtcK2wrfFk8K5wrrCu8K8yqfCvcK/yL3imaUKICAgIGlmIG5vdCBUZXh0Ym94Zm9ybWF0dGVyKGNpcGhlcnRleHRCb3guZ2V0KCIwLjAiLCAiZW5kIikpOgogICAgICAgIG1lc3NhZ2Vib3guc2hvd3dhcm5pbmcoIkNpcGhlcnRleHQgRW1wdHkiLCJDYW5ub3QgZGVjcnlwdCBub3RoaW5nIikKICAgICAgICByZXR1cm4KICAgIGlmIG5vdCBrZXlCb3guZ2V0KCk6CiAgICAgICAgbWVzc2FnZWJveC5zaG93d2FybmluZygiS2V5IEVtcHR5IiwiQ2Fubm90IGRlY3J5cHQgd2l0aG91dCBrZXkiKQogICAgICAgIHJldHVybgogICAgY2lwaGVydGV4dD1UZXh0Ym94Zm9ybWF0dGVyKGNpcGhlcnRleHRCb3guZ2V0KCIwLjAiLCAiZW5kIikpCiAgICBrZXk9a2V5Qm94LmdldCgpCiAgICBwbGFpbnRleHQgPSB0cmZkLnRyaWZpZERlY3J5cHQoa2V5LCBjaXBoZXJ0ZXh0KQogICAgcGxhaW50ZXh0Qm94LmRlbGV0ZSgiMC4wIiwgImVuZCIpCiAgICBwbGFpbnRleHRCb3guaW5zZXJ0KCIwLjAiLCBwbGFpbnRleHQpCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIwoiIiIKICAgIFB1cnBvc2U6IERlY3J5cHQgY2lwaGVydGV4dCB3aXRoIGNhZXNhciBtZXRob2QKICAgIFJlcXVpcmVtZW50OiBEZWNyeXB0IGJ1dHRvbiBiZSBwcmVzc2VkLCB0aGVyZSBpcyBhIGNpcGhlcnRleHQgdG8gZGVjcnlwdCwgc2hpZnQgaXMgdGhlIHNhbWUgYXMgdGhlIG9uZSB1c2VkIHRvIGVuY3J5cHQKICAgIFByb21pc2U6IHBsYWNlIGRlY3J5cHRlZCBjaXBoZXJ0ZXh0IGluIHBsYWludGV4dCBib3gKIiIiCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIwpkZWYgY2FsbENhZXNhckRlY3J5cHQoKToKICAgIGlmIG5vdCBUZXh0Ym94Zm9ybWF0dGVyKGNpcGhlcnRleHRCb3guZ2V0KCIwLjAiLCAiZW5kIikpOgogICAgICAgIG1lc3NhZ2Vib3guc2hvd3dhcm5pbmcoIkNpcGhlcnRleHQgRW1wdHkiLCJDYW5ub3QgZGVjcnlwdCBub3RoaW5nIikKICAgICAgICByZXR1cm4KICAgIGlmIG5vdCBzaGlmdEJveC5nZXQoKToKICAgICAgICBtZXNzYWdlYm94LnNob3d3YXJuaW5nKCJTaGlmdCBFbXB0eSIsIkNhbm5vdCBkZWNyeXB0IHdpdGhvdXQgc2hpZnQiKQogICAgICAgIHJldHVybgogICAgc2hpZnQ9aW50KHNoaWZ0Qm94LmdldCgpKSAjZ3JhYiBrZXkgYW5kIG1ha2Ugc3VyZSBJIGNhbiBkbyBtYXRoIHdpdGggaXQKICAgIGNpcGhlcnRleHQ9VGV4dGJveGZvcm1hdHRlcihjaXBoZXJ0ZXh0Qm94LmdldCgiMC4wIiwgImVuZCIpKSAKICAgIHBsYWludGV4dD1jc3IuY2Flc2FyRGVjcnlwdChzaGlmdCwgY2lwaGVydGV4dCkKICAgIHBsYWludGV4dEJveC5kZWxldGUoIjAuMCIsICJlbmQiKQogICAgcGxhaW50ZXh0Qm94Lmluc2VydCgiMC4wIiwgcGxhaW50ZXh0KQojIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSMKIiIiCiAgICBQdXJwb3NlOiBEZWNyeXB0IGNpcGhlcnRleHQgd2l0aCBSU0EgbWV0aG9kIGFuZCB0aGUgcHJpdmF0ZSBrZXkKICAgIFJlcXVpcmVtZW50OiBEZWNyeXB0IGJ1dHRvbiBiZSBwcmVzc2VkLCB0aGVyZSBpcyBhIGNpcGhlcnRleHQgdG8gZGVjcnlwdAogICAgUHJvbWlzZTogcGxhY2UgZGVjcnlwdGVkIGNpcGhlcnRleHQgaW4gcGxhaW50ZXh0IGJveAoiIiIKIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0jCmRlZiBjYWxsUlNBUHJpdkRlY3J5cHQoKToKICAgIGlmIG5vdCBUZXh0Ym94Zm9ybWF0dGVyKGNpcGhlcnRleHRCb3guZ2V0KCIwLjAiLCAiZW5kIikpOgogICAgICAgIG1lc3NhZ2Vib3guc2hvd3dhcm5pbmcoIkNpcGhlcnRleHQgRW1wdHkiLCJDYW5ub3QgZGVjcnlwdCBub3RoaW5nIikKICAgICAgICByZXR1cm4KICAgIGlmIG5vdCBwcml2YXRlS2V5Qm94LmdldCgpOgogICAgICAgIG1lc3NhZ2Vib3guc2hvd3dhcm5pbmcoIlByaXZhdGUgS2V5IEVtcHR5IiwiQ2Fubm90IGRlY3J5cHQgd2l0aG91dCBwcml2YXRla2V5IikKICAgICAgICByZXR1cm4KICAgIHByaXZhdGVLZXkgPSBwcml2YXRlS2V5Qm94LmdldCgpCiAgICBjaXBoZXJ0ZXh0PVRleHRib3hmb3JtYXR0ZXIoY2lwaGVydGV4dEJveC5nZXQoIjAuMCIsICJlbmQiKSkKICAgIHBsYWludGV4dCA9IHJzYS5SU0FQcml2RGVjcnlwdChwcml2YXRlS2V5LCBjaXBoZXJ0ZXh0KQogICAgcGxhaW50ZXh0Qm94LmRlbGV0ZSgiMC4wIiwgImVuZCIpCiAgICBwbGFpbnRleHRCb3guaW5zZXJ0KCIwLjAiLCBwbGFpbnRleHQpCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIwoiIiIKICAgIFB1cnBvc2U6IERlY3J5cHQgY2lwaGVydGV4dCB3aXRoIGJhc2UgNjQgbWV0aG9kCiAgICBSZXF1aXJlbWVudDogRGVjcnlwdCBidXR0b24gYmUgcHJlc3NlZCwgdGhlcmUgaXMgYSBjaXBoZXJ0ZXh0IHRvIGRlY3J5cHQKICAgIFByb21pc2U6IHBsYWNlIGRlY3J5cHRlZCBjaXBoZXJ0ZXh0IGluIHBsYWludGV4dCBib3gKIiIiCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIwpkZWYgY2FsbEJhc2U2NERlY3J5cHQoKToKICAgIGlmIG5vdCBUZXh0Ym94Zm9ybWF0dGVyKGNpcGhlcnRleHRCb3guZ2V0KCIwLjAiLCAiZW5kIikpOgogICAgICAgIG1lc3NhZ2Vib3guc2hvd3dhcm5pbmcoIkNpcGhlcnRleHQgRW1wdHkiLCJDYW5ub3QgZGVjcnlwdCBub3RoaW5nIikKICAgICAgICByZXR1cm4KICAgIHBsYWludGV4dD0iIgogICAgY2lwaGVydGV4dD1UZXh0Ym94Zm9ybWF0dGVyKGNpcGhlcnRleHRCb3guZ2V0KCIwLjAiLCAiZW5kIikpCiAgICBwbGFpbnRleHQ9bWI2NC5iYXNlNjREZWNyeXB0KGNpcGhlcnRleHQpCiAgICBwbGFpbnRleHRCb3guZGVsZXRlKCIwLjAiLCAiZW5kIikKICAgIHBsYWludGV4dEJveC5pbnNlcnQoIjAuMCIsIHBsYWludGV4dCkKIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0jCiIiIgogICAgUHVycG9zZTogRGVjcnlwdCBjaXBoZXJ0ZXh0IHdpdGggc3Vic3RpdHV0aW9uIG1ldGhvZAogICAgUmVxdWlyZW1lbnQ6IERlY3J5cHQgYnV0dG9uIGJlIHByZXNzZWQsIHRoZXJlIGlzIGEgY2lwaGVydGV4dCB0byBkZWNyeXB0CiAgICBQcm9taXNlOiBwbGFjZSBkZWNyeXB0ZWQgY2lwaGVydGV4dCBpbiBwbGFpbnRleHQgYm94CiIiIgojIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSMKZGVmIGNhbGxTdWJzdGl0dXRpb25EZWNyeXB0KCk6CiAgICBpZiBub3QgVGV4dGJveGZvcm1hdHRlcihjaXBoZXJ0ZXh0Qm94LmdldCgiMC4wIiwgImVuZCIpKToKICAgICAgICBtZXNzYWdlYm94LnNob3d3YXJuaW5nKCJDaXBoZXJ0ZXh0IEVtcHR5IiwiQ2Fubm90IGRlY3J5cHQgbm90aGluZyIpCiAgICAgICAgcmV0dXJuCiAgICBwbGFpbnRleHQ9IiIKICAgIGNpcGhlcnRleHQ9VGV4dGJveGZvcm1hdHRlcihjaXBoZXJ0ZXh0Qm94LmdldCgiMC4wIiwgImVuZCIpKQoKICAgIHBsYWludGV4dD1zdWIuc3Vic3RpdHV0aW9uRGVjcnlwdChjaXBoZXJ0ZXh0KQogICAgCiAgICBwbGFpbnRleHRCb3guZGVsZXRlKCIwLjAiLCAiZW5kIikKICAgIHBsYWludGV4dEJveC5pbnNlcnQoIjAuMCIsIHBsYWludGV4dCkKCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIwoiIiIKICAgIFB1cnBvc2U6IGNoYW5nZXMgcGFzc3dvcmQgb2YgdXNlciBiYXNlZCBvbiB0aGUgVUlEIHByb3ZpZGVkCiAgICBSZXF1aXJlbWVudDogdGhlcmUgaXMgYSBnaXZlbiBVSUQgYW5kIGhhcyBhIHZhbGlkIHVzZXIgYW5kIHRoZSBwYXNzd29yZCBpcyBub3QgbnVsbAogICAgUHJvbWlzZTogY2hhbmdlIG9ubHkgdGhlIHBhc3N3b3JkIG9mIHRoZSB1c2VyIHdpdGggdGhlIGdpdmVuIFVJRAoiIiIKIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0jCmRlZiBjaGFuZ2VQYXNzd29yZCgpOgogICAgaWYgbm90IHBhc3N3b3JkQm94LmdldCgpIG9yIG5vdCBVSURCb3guZ2V0KCk6CiAgICAgICAgbWVzc2FnZWJveC5zaG93d2FybmluZygiUGFzc3dvcmQgb3IgVUlEIGVtcHR5IiwiQ2Fubm90IGNoYW5nZSBwYXNzd29yZCB3aXRob3V0IHBhc3N3b3JkIGFuZCBVSUQgcHJvdmlkZWQiKQogICAgICAgIHJldHVybgogICAgcGFzc3dvcmQ9cGFzc3dvcmRCb3guZ2V0KCkKICAgIFVJRD1VSURCb3guZ2V0KCkjIHNpbXBsZSBnZXQgZnVuY3Rpb24gZnJvbSBFbnRyeSBib3hlcywgdGFrZXMgaW4gd2hhdGV2ZXIgd2FzIHRoZSB1c2VyIGlucHV0IGludG8gdGhlIFVJRCBib3gKICAgIGlmIHBpcGVDaGVjayhwYXNzd29yZCk6CiAgICAgICAgbWVzc2FnZWJveC5zaG93d2FybmluZygiUGFzc3dvcmQgUGlwZSIsIlBhc3N3b3JkIGNhbm5vdCBjb250YWluIHRoZSBwaXBlIGNoYXJhY3RlciwgfCIpCiAgICAgICAgcmV0dXJuCgogICAgc2h1dGlsLmNvcHlmaWxlKCdjcmVkZW50aWFscy50eHQnLCdiYWNrdXBjcmVkZW50aWFscy50eHQnKQogICAgCiAgICBVSURFeGlzdHM9RmFsc2UKICAgIHdpdGggb3BlbigiY3JlZGVudGlhbHMudHh0IiwgInIiKSBhcyBjcmVkZW50aWFsc0ZpbGU6CiAgICAgICAgdHJ5OgogICAgICAgICAgICBmb3IgbGluZSBpbiBjcmVkZW50aWFsc0ZpbGU6CiAgICAgICAgICAgICAgICBsaW5lID0gbGluZS5zcGxpdCgifCIsIDIpCiAgICAgICAgICAgICAgICBpZiBVSUQgPT0gbGluZVsyXS5yZXBsYWNlKCdcbicsICcnKToKICAgICAgICAgICAgICAgICAgICBVSURFeGlzdHM9VHJ1ZQogICAgICAgICAgICAgICAgVUlEPWxpbmVbMl0ucmVwbGFjZSgnXG4nLCAnJykKICAgICAgICBleGNlcHQgVW5ib3VuZExvY2FsRXJyb3I6CiAgICAgICAgICAgIG1lc3NhZ2Vib3guc2hvd3dhcm5pbmcoIlVuYm91bmQgTG9jYWwgRXJyb3IiLCJWZXJpZnkgdXNlciBpbnB1dHMgYXJlIGFjY3VyYXRlIikKICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgIG1lc3NhZ2Vib3guc2hvd3dhcm5pbmcoIkdlbmVyaWMgRXJyb3IiLGYiRXJyb3Igb2NjdXJlZDoge3N0cihlKX0iKQogICAgCgogICAgaWYgbm90IFVJREV4aXN0czoKICAgICAgICBtZXNzYWdlYm94LnNob3d3YXJuaW5nKCJVSUQgRG9lcyBOb3QgRXhpc3QiLCJVSUQgZG9lcyBub3QgZXhpc3QsIHZlcmlmeSBpbnB1dCIpCiAgICAgICAgcmV0dXJuCiAgICAKICAgIHdpdGggb3BlbigibmV3Y3JlZGVudGlhbHMudHh0IiwgInciKSBhcyBuZXdDcmVkZW50aWFsc0ZpbGU6ICN3cml0ZSB3aWxsIGF1dG9tYXRpY2FsbHkgY3JlYXRlIGZpbGUgaWYgaXQgZG9lc250IGV4aXN0IGFscmVhZHkgKHdoaWNoIGl0IHNob3VsZG4ndCkgYW5kIGlmIGl0IGRvZXMsIGl0IHRydW5jYXRlcyBpdCBhbmQgaXRzIGZpbmUKICAgICAgICB0cnk6CiAgICAgICAgICAgIGZvciBsaW5lIGluIGNyZWRlbnRpYWxzRmlsZToKICAgICAgICAgICAgICAgIGxpbmUgPSBsaW5lLnNwbGl0KCJ8IiwgMikgI3RoZSBwaXBlIGlzIHRoZSBzZXBlcmF0b3IgdGhhdCBJIHVzZSBpbiB0aGUgdXNlci9wYXNzL1VJRCBmaWxlCiAgICAgICAgICAgICAgICBpZiBVSUQgPT0gbGluZVsyXS5yZXBsYWNlKCdcbicsICcnKTogI25ld2xpbmVzIGJhZCA+OigsIG9ubHkgY2hhbmdlIHRoZSBwYXNzd29yZCBmb3IgdGhlIHBlcnNvbiB3aXRoIHNwZWNpZmllZCBVSUQKICAgICAgICAgICAgICAgICAgICBsaW5lWzFdID0gcGFzc3dvcmQKICAgICAgICAgICAgICAgIG5ld0NyZWRlbnRpYWxzRmlsZS53cml0ZShsaW5lWzBdICsgInwiICsgbGluZVsxXSArICJ8IiArIGxpbmVbMl0gKyAiXG4iKSAjcHV0IHRoZSBmaWxlIGJhY2sgdG9nZXRoZXIKICAgICAgICBleGNlcHQgVW5ib3VuZExvY2FsRXJyb3I6CiAgICAgICAgICAgIGlmIG9zLm5hbWUgPT0gJ250JzoKICAgICAgICAgICAgICAgIG9zLnN5c3RlbSgnY29weSBiYWNrdXBjcmVkZW50aWFscy50eHQgY3JlZGVudGlhbHMudHh0JykKICAgICAgICAgICAgZWxpZiBvcy5uYW1lID09ICdwb3NpeCc6CiAgICAgICAgICAgICAgICBvcy5zeXN0ZW0oJ2NwIGJhY2t1cGNyZWRlbnRpYWxzLnR4dCBjcmVkZW50aWFscy50eHQnKQogICAgICAgICAgICBtZXNzYWdlYm94LnNob3d3YXJuaW5nKCJVbmJvdW5kIExvY2FsIEVycm9yIiwiVmVyaWZ5IHVzZXIgaW5wdXRzIGFyZSBhY2N1cmF0ZSIpCiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICBpZiBvcy5uYW1lID09ICdudCc6CiAgICAgICAgICAgICAgICBvcy5zeXN0ZW0oJ2NvcHkgYmFja3VwY3JlZGVudGlhbHMudHh0IGNyZWRlbnRpYWxzLnR4dCcpCiAgICAgICAgICAgIGVsaWYgb3MubmFtZSA9PSAncG9zaXgnOgogICAgICAgICAgICAgICAgb3Muc3lzdGVtKCdjcCBiYWNrdXBjcmVkZW50aWFscy50eHQgY3JlZGVudGlhbHMudHh0JykKICAgICAgICAgICAgbWVzc2FnZWJveC5zaG93d2FybmluZygiR2VuZXJpYyBFcnJvciIsZiJFcnJvciBvY2N1cmVkOiB7c3RyKGUpfSIpCiAgICAKICAgIG9zLnJlbW92ZSgiY3JlZGVudGlhbHMudHh0IikKICAgIG9zLnJlbW92ZSgiYmFja3VwY3JlZGVudGlhbHMudHh0IikjIHJlbW92ZXMgdGhlIGZpbGUgY3JlZGVudGlhbHMgdHh0IHRvIGZyZWUgdXAgdGhlIG5hbWUKICAgIG9zLnJlbmFtZSgibmV3Y3JlZGVudGlhbHMudHh0IiwgImNyZWRlbnRpYWxzLnR4dCIpIyByZW5hbWVzIHRoZSBuZXdseSB3cml0dGVuIGNyZWRlbnRpYWxzIGZpbGUgdG8gdGhlIG9yaWdpbmFsIG5hbWUKIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0jCiIiIgogICAgUHVycG9zZTogY2hhbmdlcyB1c2VybmFtZSBvZiB1c2VyIGJhc2VkIG9uIHRoZSBVSUQgcHJvdmlkZWQKICAgIFJlcXVpcmVtZW50OiB0aGVyZSBpcyBhIGdpdmVuIFVJRCBhbmQgaGFzIGEgdmFsaWQgdXNlciBhbmQgdGhlIHVzZXJuYW1lIGlzIG5vdCBudWxsCiAgICBQcm9taXNlOiBjaGFuZ2Ugb25seSB0aGUgdXNlcm5hbWUgb2YgdGhlIHVzZXIgd2l0aCB0aGUgZ2l2ZW4gVUlECiIiIgojIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSMKZGVmIGNoYW5nZVVzZXJuYW1lKCk6CiAgICBpZiBub3QgdXNlcm5hbWVCb3guZ2V0KCkgb3Igbm90IFVJREJveC5nZXQoKToKICAgICAgICBtZXNzYWdlYm94LnNob3d3YXJuaW5nKCJVc2VybmFtZSBvciBVSUQgZW1wdHkiLCJDYW5ub3QgY2hhbmdlIHVzZXJuYW1lIHdpdGhvdXQgdXNlcm5hbWUgYW5kIFVJRCBwcm92aWRlZCIpCiAgICAgICAgcmV0dXJuCiAgICB1c2VybmFtZT11c2VybmFtZUJveC5nZXQoKQogICAgVUlEPVVJREJveC5nZXQoKQoKICAgIHNodXRpbC5jb3B5ZmlsZSgnY3JlZGVudGlhbHMudHh0JywnYmFja3VwY3JlZGVudGlhbHMudHh0JykKCiAgICBpZiBwaXBlQ2hlY2sodXNlcm5hbWUpOgogICAgICAgIG1lc3NhZ2Vib3guc2hvd3dhcm5pbmcoIlVzZXJuYW1lIFBpcGUiLCJVc2VybmFtZSBjYW5ub3QgY29udGFpbiB0aGUgcGlwZSBjaGFyYWN0ZXIsIHwiKQogICAgICAgIHJldHVybgoKICAgIHdpdGggb3BlbigiY3JlZGVudGlhbHMudHh0IiwgInIiKSBhcyBjcmVkZW50aWFsc0ZpbGU6CiAgICAgICAgd2l0aCBvcGVuKCJuZXdjcmVkZW50aWFscy50eHQiLCAiYSIpIGFzIG5ld0NyZWRlbnRpYWxzRmlsZTogI3dyaXRlIHdpbGwgYXV0b21hdGljYWxseSBjcmVhdGUgZmlsZSBpZiBpdCBkb2VzbnQgZXhpc3QgYWxyZWFkeSAod2hpY2ggaXQgc2hvdWxkbid0KSBhbmQgaWYgaXQgZG9lcywgaXQgdHJ1bmNhdGVzIGl0IGFuZCBpdHMgZmluZQogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICBmb3IgbGluZSBpbiBjcmVkZW50aWFsc0ZpbGU6CiAgICAgICAgICAgICAgICAgICAgbGluZSA9IGxpbmUuc3BsaXQoInwiLCAyKSN0aGUgcGlwZSBpcyB0aGUgc2VwZXJhdG9yIHRoYXQgSSB1c2UgaW4gdGhlIHVzZXIvcGFzcy9VSUQgZmlsZQogICAgICAgICAgICAgICAgICAgIGlmIFVJRCA9PSBsaW5lWzJdLnJlcGxhY2UoJ1xuJywgJycpOiAjbmV3bGluZXMgYmFkID46KCwgb25seSBjaGFuZ2UgdGhlIHVzZXJuYW1lIGZvciB0aGUgcGVyc29uIHdpdGggc3BlY2lmaWVkIFVJRAogICAgICAgICAgICAgICAgICAgICAgICBsaW5lWzBdID0gdXNlcm5hbWUKICAgICAgICAgICAgICAgICAgICBuZXdDcmVkZW50aWFsc0ZpbGUud3JpdGUobGluZVswXSArICJ8IiArIGxpbmVbMV0gKyAifCIgKyBsaW5lWzJdICsgIlxuIikgI3B1dCB0aGUgZmlsZSBiYWNrIHRvZ2V0aGVyCiAgICAgICAgICAgIGV4Y2VwdCBVbmJvdW5kTG9jYWxFcnJvcjoKICAgICAgICAgICAgICAgIHNodXRpbC5jb3B5ZmlsZSgnYmFja3VwY3JlZGVudGlhbHMudHh0JywgJ2NyZWRlbnRpYWxzLnR4dCcpCiAgICAgICAgICAgICAgICBtZXNzYWdlYm94LnNob3d3YXJuaW5nKCJVbmJvdW5kIExvY2FsIEVycm9yIiwiVmVyaWZ5IHVzZXIgaW5wdXRzIGFyZSBhY2N1cmF0ZSIpCiAgICAgICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgICAgIHNodXRpbC5jb3B5ZmlsZSgnYmFja3VwY3JlZGVudGlhbHMudHh0JywgJ2NyZWRlbnRpYWxzLnR4dCcpCiAgICAgICAgICAgICAgICBtZXNzYWdlYm94LnNob3d3YXJuaW5nKCJHZW5lcmljIEVycm9yIixmIkVycm9yIG9jY3VyZWQ6IHtzdHIoZSl9IikKCiAgICBvcy5yZW1vdmUoImNyZWRlbnRpYWxzLnR4dCIpCiAgICBvcy5yZW5hbWUoIm5ld2NyZWRlbnRpYWxzLnR4dCIsICJjcmVkZW50aWFscy50eHQiKQogICAgb3MucmVtb3ZlKCJiYWNrdXBjcmVkZW50aWFscy50eHQiKQojIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSMKIiIiCiAgICBQdXJwb3NlOiBtYWtlIG5ldyB1c2VyIGFuZCBhdXRvbWF0aWNhbGx5IGFzc2lnbiBpdCBhIFVJRAogICAgUmVxdWlyZW1lbnQ6IGhhdmUgYSB1bmlxdWUgdXNlcm5hbWUgYW5kIGEgbm90IG51bGwgcGFzc3dvcmQKICAgIFByb21pc2U6IGFkZCB1c2VyIHdpdGggZ2l2ZW4gZGV0YWlscyB0byBjcmVkZW50aWFscy50eHQgZmlsZQoiIiIKIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0jCmRlZiBuZXdVc2VyKCk6CiAgICBpZiBub3QgdXNlcm5hbWVCb3guZ2V0KCkgb3Igbm90IHBhc3N3b3JkQm94LmdldCgpOgogICAgICAgIG1lc3NhZ2Vib3guc2hvd3dhcm5pbmcoIlVzZXJuYW1lIG9yIFBhc3N3b3JkIEVtcHR5IiwiQ2Fubm90IGFkZCB1c2VyIHdpdGhvdXQgYm90aCBhIHVzZXJuYW1lIGFuZCBhIHBhc3N3b3JkIikKICAgICAgICByZXR1cm4KICAgIHBhc3N3b3JkPXBhc3N3b3JkQm94LmdldCgpCiAgICB1c2VybmFtZT11c2VybmFtZUJveC5nZXQoKQogICAgaWYgcGlwZUNoZWNrKHBhc3N3b3JkKToKICAgICAgICBtZXNzYWdlYm94LnNob3d3YXJuaW5nKCJQYXNzd29yZCBQaXBlIiwiUGFzc3dvcmQgY2Fubm90IGNvbnRhaW4gdGhlIHBpcGUgY2hhcmFjdGVyLCB8IikKICAgICAgICByZXR1cm4KCiAgICBpZiBwaXBlQ2hlY2sodXNlcm5hbWUpOgogICAgICAgIG1lc3NhZ2Vib3guc2hvd3dhcm5pbmcoIlVzZXJuYW1lIFBpcGUiLCJVc2VybmFtZSBjYW5ub3QgY29udGFpbiB0aGUgcGlwZSBjaGFyYWN0ZXIsIHwiKQogICAgICAgIHJldHVybgoKICAgIGlmIHVzZXJuYW1lRXhpc3RzKHVzZXJuYW1lKToKICAgICAgICBtZXNzYWdlYm94LnNob3d3YXJuaW5nKCJCYWQgVXNlcm5hbWUiLCAiVXNlcm5hbWUgYWxyZWFkeSBleGlzdHMiKQogICAgICAgIHJldHVybgogICAgbWF4VUlEID0gMAogICAgd2l0aCBvcGVuKCJjcmVkZW50aWFscy50eHQiLCAiciIpIGFzIGNyZWRlbnRpYWxzRmlsZToKICAgICAgICBmb3IgbGluZSBpbiBjcmVkZW50aWFsc0ZpbGU6CiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIFVJRCA9IGludChsaW5lLnN0cmlwKCkuc3BsaXQoInwiKVsyXSkKICAgICAgICAgICAgICAgIGlmIFVJRCA+IG1heFVJRDoKICAgICAgICAgICAgICAgICAgICBtYXhVSUQgPSBVSUQKICAgICAgICAgICAgZXhjZXB0OgogICAgICAgICAgICAgICAgY29udGludWUKICAgIAogICAgbmV3VUlEID0gbWF4VUlEKzEKICAgIAogICAgd2l0aCBvcGVuKCJjcmVkZW50aWFscy50eHQiLCAiYSIpIGFzIGNyZWRlbnRpYWxzRmlsZTogI25vdyBhY3R1YWxseSB3cml0ZSBpbiB0aGUgbmV3IHVzZXIgc2luY2UgaXRzIGFsbCBnb29kCiAgICAgICAgY3JlZGVudGlhbHNGaWxlLndyaXRlKHVzZXJuYW1lICsgInwiICsgcGFzc3dvcmQgKyAifCIgKyBzdHIobmV3VUlEKSArICJcbiIpCiAgICAKIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0jCiIiIgogICAgUHVycG9zZTogcmVtb3ZlIHVzZXIgZnJvbSBjcmVkZW50aWFscy50eHQgZmlsZSBiYXNlZCBvbiBVSUQKICAgIFJlcXVpcmVtZW50OiBwcmVzcyByZW1vdmUgdXNlciBidXR0b24KICAgIFByb21pc2U6IHJlbW92ZSB1c2VyIHdpdGggZ2l2ZW4gVUlEIGZyb20gY3JlZGVudGlhbHMudHh0IGFuZCByZW9yZGVyaW5nIHRoZSBmb2xsb3dpbmcgdXNlcnMgd2hpY2ggd2lsbCBjaGFuZ2UgYWxsIHRoZSBVSUQKIiIiCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIwpkZWYgcmVtb3ZldXNlcigpOgogICAgaWYgbm90IHVzZXJuYW1lQm94LmdldCgpIGFuZCBub3QgVUlEQm94LmdldCgpOgogICAgICAgIG1lc3NhZ2Vib3guc2hvd3dhcm5pbmcoIlVzZXJuYW1lIGFuZCBVSUQgRW1wdHkiLCJDYW5ub3QgcmVtb3ZlIHVzZXIgd2hlbiBubyB1c2VybmFtZSBvciBVSUQgcHJvdmlkZWQiKQogICAgICAgIHJldHVybgogICAgdXNlcm5hbWU9dXNlcm5hbWVCb3guZ2V0KCkKICAgIFVJRD1VSURCb3guZ2V0KCkKICAgIAogICAgaWYgcGlwZUNoZWNrKHVzZXJuYW1lKToKICAgICAgICBtZXNzYWdlYm94LnNob3d3YXJuaW5nKCJVc2VybmFtZSBQaXBlIiwiVXNlcm5hbWUgY2Fubm90IGNvbnRhaW4gdGhlIHBpcGUgY2hhcmFjdGVyLCB8IikKICAgICAgICByZXR1cm4KICAgIHNodXRpbC5jb3B5ZmlsZSgnY3JlZGVudGlhbHMudHh0JywnYmFja3VwY3JlZGVudGlhbHMudHh0JykKCiAgICBpZiBub3QgdXNlcm5hbWVFeGlzdHModXNlcm5hbWUpOgogICAgICAgIG1lc3NhZ2Vib3guc2hvd3dhcm5pbmcoIkJhZCBVc2VybmFtZSIsICJVc2VybmFtZSBkb2VzIG5vdCBleGlzdCIpCiAgICAgICAgcmV0dXJuCgogICAgbmV3VUlEPSIwIgogICAgcmVwbGFjZWRVc2Vycz0wCiAgICB3aXRoIG9wZW4oImNyZWRlbnRpYWxzLnR4dCIsICJyIikgYXMgY3JlZGVudGlhbHNGaWxlOgogICAgICAgIHdpdGggb3BlbigibmV3Y3JlZGVudGlhbHMudHh0IiwgInciKSBhcyBuZXdDcmVkZW50aWFsc0ZpbGU6ICN3cml0ZSB3aWxsIGF1dG9tYXRpY2FsbHkgY3JlYXRlIGZpbGUgaWYgaXQgZG9lc250IGV4aXN0IGFscmVhZHkgKHdoaWNoIGl0IHNob3VsZG4ndCkgYW5kIGlmIGl0IGRvZXMsIGl0IHRydW5jYXRlcyBpdCBhbmQgaXRzIGZpbmUKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgZm9yIGxpbmUgaW4gY3JlZGVudGlhbHNGaWxlOgogICAgICAgICAgICAgICAgICAgIGxpbmUgPSBsaW5lLnNwbGl0KCJ8IiwgMikjdGhlIHBpcGUgaXMgdGhlIHNlcGVyYXRvciB0aGF0IEkgdXNlIGluIHRoZSB1c2VyL3Bhc3MvVUlEIGZpbGUKICAgICAgICAgICAgICAgICAgICBpZiBVSUQgPT0gbGluZVsyXS5yZXBsYWNlKCdcbicsICcnKSBvciB1c2VybmFtZSA9PSBsaW5lWzBdLnJlcGxhY2UoIlxuIiwgIiIpOiAjbmV3bGluZXMgYmFkID46KCwgb25seSByZW1vdmUgdXNlciB3aXRoIHNwZWNpZmllZCBVSUQgb3Igc3BlY2lmaWVkIHVzZXJuYW1lCiAgICAgICAgICAgICAgICAgICAgICAgIG5ld1VJRD0gaW50KGxpbmVbMl0pCiAgICAgICAgICAgICAgICAgICAgICAgIHJlcGxhY2VkVXNlcnMrPTEKICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICBuZXdDcmVkZW50aWFsc0ZpbGUud3JpdGUobGluZVswXSArICJ8IiArIGxpbmVbMV0gKyAifCIgKyBzdHIobmV3VUlEKSArICJcbiIpI3B1dCB0aGUgZmlsZSBiYWNrIHRvZ2V0aGVyCgogICAgICAgICAgICAgICAgICAgIG5ld1VJRD0gaW50KGxpbmVbMl0pICsgMSAtIHJlcGxhY2VkVXNlcnMgI2tlZXAgdGhlIFVJRHMgaW5jcmVtZW50aW5nIGVhY2ggdGltZSBidXQgYWxzbyBub3QgYnJlYWssIG5vdyBhY2NvdW50aW5nIGZvciB0aGUgdXNlcnMgcmVtb3ZlZCwgdGhpcyB3YXMgdGhlIGVhc2llc3Qgc29sdXRpb24gSSBjb3VsZCB0aGluayBvZgogICAgICAgICAgICBleGNlcHQgVW5ib3VuZExvY2FsRXJyb3I6CiAgICAgICAgICAgICAgICBzaHV0aWwuY29weWZpbGUoJ2JhY2t1cGNyZWRlbnRpYWxzLnR4dCcsICdjcmVkZW50aWFscy50eHQnKQogICAgICAgICAgICAgICAgbWVzc2FnZWJveC5zaG93d2FybmluZygiVW5ib3VuZCBMb2NhbCBFcnJvciIsIlZlcmlmeSB1c2VyIGlucHV0cyBhcmUgYWNjdXJhdGUiKQogICAgICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgICAgICBzaHV0aWwuY29weWZpbGUoJ2JhY2t1cGNyZWRlbnRpYWxzLnR4dCcsICdjcmVkZW50aWFscy50eHQnKQogICAgICAgICAgICAgICAgbWVzc2FnZWJveC5zaG93d2FybmluZygiR2VuZXJpYyBFcnJvciIsZiJFcnJvciBvY2N1cmVkOiB7c3RyKGUpfSIpCgogICAgb3MucmVtb3ZlKCJjcmVkZW50aWFscy50eHQiKQogICAgb3MucmVuYW1lKCJuZXdjcmVkZW50aWFscy50eHQiLCAiY3JlZGVudGlhbHMudHh0IikKICAgIG9zLnJlbW92ZSgiYmFja3VwY3JlZGVudGlhbHMudHh0IikKCmRlZiBnZXRVSUQoKToKICAgIGlmIG5vdCB1c2VybmFtZUJveC5nZXQoKToKICAgICAgICBtZXNzYWdlYm94LnNob3d3YXJuaW5nKCJVc2VybmFtZSBFbXB0eSIsIlVJRCBjYW5ub3QgYmUgcmV0dXJuZWQgZnJvbSBub3RoaW5nIikKICAgICAgICByZXR1cm4KICAgIHVzZXJuYW1lPXVzZXJuYW1lQm94LmdldCgpCgogICAgaWYgbm90IHVzZXJuYW1lRXhpc3RzKHVzZXJuYW1lKToKICAgICAgICBtZXNzYWdlYm94LnNob3d3YXJuaW5nKCJCYWQgVXNlcm5hbWUiLCAiVXNlcm5hbWUgZG9lcyBub3QgZXhpc3QiKQogICAgICAgIHJldHVybgogICAgCiAgICBVSUQgPSAwCiAgICB3aXRoIG9wZW4oImNyZWRlbnRpYWxzLnR4dCIsICJyIikgYXMgY3JlZGVudGlhbHNGaWxlOgogICAgICAgIHRyeToKICAgICAgICAgICAgZm9yIGxpbmUgaW4gY3JlZGVudGlhbHNGaWxlOgogICAgICAgICAgICAgICAgbGluZSA9IGxpbmUuc3BsaXQoInwiLCAyKSN0aGUgcGlwZSBpcyB0aGUgc2VwZXJhdG9yIHRoYXQgSSB1c2UgaW4gdGhlIHVzZXIvcGFzcy9VSUQgZmlsZQogICAgICAgICAgICAgICAgaWYgdXNlcm5hbWUgPT0gbGluZVswXS5yZXBsYWNlKCdcbicsICcnKTogI25ld2xpbmVzIGJhZCA+OigsIG9ubHkgZ2V0IFVJRCBmb3IgaW5wdXQgdXNlcm5hbWUKICAgICAgICAgICAgICAgICAgICBVSUQgPSBpbnQobGluZVsyXSkKICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICBVSURCb3guZGVsZXRlKDAsICJlbmQiKQogICAgICAgICAgICBVSURCb3guaW5zZXJ0KDAsIFVJRCkKICAgICAgICBleGNlcHQgVW5ib3VuZExvY2FsRXJyb3I6CiAgICAgICAgICAgIHNodXRpbC5jb3B5ZmlsZSgnYmFja3VwY3JlZGVudGlhbHMudHh0JywgJ2NyZWRlbnRpYWxzLnR4dCcpCiAgICAgICAgICAgIG1lc3NhZ2Vib3guc2hvd3dhcm5pbmcoIlVuYm91bmQgTG9jYWwgRXJyb3IiLCJWZXJpZnkgdXNlciBpbnB1dHMgYXJlIGFjY3VyYXRlIikKICAgICAgICBleGNlcHQgSW5kZXhFcnJvcjoKICAgICAgICAgICAgc2h1dGlsLmNvcHlmaWxlKCdiYWNrdXBjcmVkZW50aWFscy50eHQnLCAnY3JlZGVudGlhbHMudHh0JykKICAgICAgICAgICAgbWVzc2FnZWJveC5zaG93d2FybmluZygiSW5kZXggRXJyb3IiLCJjcmVkZW50aWFscy50eHQgbGlrZWx5IGJyb2tlbiwgcGxlYXNlIGludmVzdGlnYXRlIikKICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgIHNodXRpbC5jb3B5ZmlsZSgnYmFja3VwY3JlZGVudGlhbHMudHh0JywgJ2NyZWRlbnRpYWxzLnR4dCcpCiAgICAgICAgICAgIG1lc3NhZ2Vib3guc2hvd3dhcm5pbmcoIkluZGV4IEVycm9yIiwiY3JlZGVudGlhbHMudHh0IGxpa2VseSBicm9rZW4sIHBsZWFzZSBpbnZlc3RpZ2F0ZSIpCiAgICAgICAgICAgIG1lc3NhZ2Vib3guc2hvd3dhcm5pbmcoIkdlbmVyaWMgRXJyb3IiLGYiRXJyb3Igb2NjdXJlZDoge3N0cihlKX0iKQoKIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0jCiIiIgogICAgUHVycG9zZTogY2hlY2sgaWYgdXNlciBoYXMgdmFsaWQgY3JlZGVudGlhbHMgYmVmb3JlIGluaXRpYWxpc2luZyBwcm9ncmFtCiAgICBSZXF1aXJlbWVudDogc3VibWl0IHZhbGlkIHVzZXJuYW1lIGFuZCBwYXNzd29yZAogICAgUHJvbWlzZTogaW5pdGlhbGlzZSBwcm9ncmFtCiIiIgojIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSMKaWYgbHMuc3RhcnQoKToKICAgIHdpbmRvdz1jdXN0b210a2ludGVyLkNUaygpCiAgICB3aW5kb3cucm93Y29uZmlndXJlKGluZGV4PVswLCAxLCAyLCAzLCA0XSwgbWluc2l6ZT0xMTApCiAgICB3aW5kb3cuY29sdW1uY29uZmlndXJlKGluZGV4PTAsIG1pbnNpemU9MTEwKQogICAgI3dpbmRvdy5taW5zaXplKDM2NiwgNTUwKQogICAgI3dpbmRvdy5tYXhzaXplKDM2NiwgNTUwKQoKICAgIEJBU0VfRElSID0gb3MucGF0aC5kaXJuYW1lKG9zLnBhdGguYWJzcGF0aChfX2ZpbGVfXykpCiAgICBpY29uX3BhdGggPSBvcy5wYXRoLmpvaW4oQkFTRV9ESVIsICdTY2hvb2xfbG9nb19MYWtlX0cuaWNvJykgI0xha2UgRyBpY28gZm9yIGJvdGggd2luZG93cwogICAgd2luZG93Lmljb25iaXRtYXAoaWNvbl9wYXRoKQogICAgd2luZG93LnRpdGxlKCJFbmNyeXB0aW9uUHJvZ3JhbSIpICNuaWNlIG5hbWUgOkQKICAgIHRyaWZpZEJ1dHRvbj1jdXN0b210a2ludGVyLkNUa0J1dHRvbih3aW5kb3csIGJvcmRlcl93aWR0aD0xLCBjb3JuZXJfcmFkaXVzPTMgLCBmZ19jb2xvcj0iIzNmNTc5OSIsIGNvbW1hbmQ9IHRyaWZpZCwgdGV4dD0iVHJpZmlkIiwgdGV4dF9jb2xvcj0iYmxhY2siKSAjYWxsIHRoZSBtZXRob2QgYnV0dG9ucwogICAgY2Flc2FyQnV0dG9uPWN1c3RvbXRraW50ZXIuQ1RrQnV0dG9uKHdpbmRvdywgYm9yZGVyX3dpZHRoPTEsIGNvcm5lcl9yYWRpdXM9MyAsIGZnX2NvbG9yPSIjM2Y1Nzk5IiwgY29tbWFuZD0gY2Flc2FyLCB0ZXh0PSJDYWVzYXIiLCB0ZXh0X2NvbG9yPSJibGFjayIpCiAgICBSU0FCdXR0b249Y3VzdG9tdGtpbnRlci5DVGtCdXR0b24od2luZG93LCBib3JkZXJfd2lkdGg9MSwgY29ybmVyX3JhZGl1cz0zICwgZmdfY29sb3I9IiMzZjU3OTkiLCBjb21tYW5kPSBSU0EsIHRleHQ9IlJTQSIsIHRleHRfY29sb3I9ImJsYWNrIikKICAgIGI2NEJ1dHRvbj1jdXN0b210a2ludGVyLkNUa0J1dHRvbih3aW5kb3csIGJvcmRlcl93aWR0aD0xLCBjb3JuZXJfcmFkaXVzPTMgLCBmZ19jb2xvcj0iIzNmNTc5OSIsIGNvbW1hbmQ9IGJhc2U2NCwgdGV4dD0iQmFzZSA2NCIsIHRleHRfY29sb3I9ImJsYWNrIikKICAgIHN1YnN0aXR1dGlvbkJ1dHRvbj1jdXN0b210a2ludGVyLkNUa0J1dHRvbih3aW5kb3csIGJvcmRlcl93aWR0aD0xLCBjb3JuZXJfcmFkaXVzPTMgLCBmZ19jb2xvcj0iIzNmNTc5OSIsIGNvbW1hbmQ9IHN1YnN0aXR1dGlvbiwgdGV4dD0iU3Vic3RpdHV0aW9uIiwgdGV4dF9jb2xvcj0iYmxhY2siKQogICAgCiAgICBjaGFuZ2VEZXRhaWxzQnV0dG9uPWN1c3RvbXRraW50ZXIuQ1RrQnV0dG9uKHdpbmRvdywgaGVpZ2h0PTEsIHdpZHRoPTcsIGJvcmRlcl93aWR0aD0xLCBjb3JuZXJfcmFkaXVzPTIgLCBmZ19jb2xvcj0iIzNmNTc5OSIsIGNvbW1hbmQ9IGNoYW5nZURldGFpbHMsIHRleHQ9IkRldGFpbHMiLCB0ZXh0X2NvbG9yPSJibGFjayIpICNkZXRhaWwgYnV0dG9uCgogICAgdHJpZmlkQnV0dG9uLmdyaWQoY29sdW1uPTAsIHJvdz0wLCBzdGlja3k9Im5zZXciKSAjIHVubGlrZSBhIGxvdCBvZiB0aGUgb3RoZXIgd2lkZ2V0cywgd2UgYWx3YXlzIHdhbnQgdGhlc2Ugb25lcyB2aXNpYmxlIGFuZCBhY2Nlc3NpYmxlIHNvIHRoZXkgYXJlIHB1dCBpbnRvIHRoZSB3aW5kb3cgYXQgdGhlIHN0YXJ0CiAgICBjYWVzYXJCdXR0b24uZ3JpZChjb2x1bW49MCwgcm93PTEsIHN0aWNreT0ibnNldyIpCiAgICBSU0FCdXR0b24uZ3JpZChjb2x1bW49MCwgcm93PTIsIHN0aWNreT0ibnNldyIpCiAgICBiNjRCdXR0b24uZ3JpZChjb2x1bW49MCwgcm93PTMsIHN0aWNreT0ibnNldyIpCiAgICBzdWJzdGl0dXRpb25CdXR0b24uZ3JpZChjb2x1bW49MCwgcm93PTQsIHN0aWNreT0ibnNldyIpCiAgICBjaGFuZ2VEZXRhaWxzQnV0dG9uLmdyaWQoY29sdW1uPTEsIHJvdz0wLCBzdGlja3k9Im5lIikKCiAgICBwbGFpbnRleHRMYWJlbD1jdXN0b210a2ludGVyLkNUa0xhYmVsKHdpbmRvdywgdGV4dD0iUGxhaW50ZXh0OiIpCiAgICBwbGFpbnRleHRCb3g9Y3VzdG9tdGtpbnRlci5DVGtUZXh0Ym94KHdpbmRvdywgaGVpZ2h0PTMpICMgdGhlIHBsYWludGV4dCBhbmQgY2lwaWhlcnRleHQgZmllbGRzIG5lZWQgdG8gYmUgVGV4dCB0byBhbGxvdyBtdWx0aWxpbmUgbWVzc2FnZXMgdG8gYmUgZWFzaWx5IHZpc2libGUgZm9yIHRoZSBlbmQgdXNlcgogICAgY2lwaGVydGV4dExhYmVsPWN1c3RvbXRraW50ZXIuQ1RrTGFiZWwod2luZG93LCB0ZXh0PSJDaXBoZXJ0ZXh0OiIpCiAgICBjaXBoZXJ0ZXh0Qm94PWN1c3RvbXRraW50ZXIuQ1RrVGV4dGJveCh3aW5kb3csIGhlaWdodD0zKQoKICAgIHVzZXJuYW1lQm94PWN1c3RvbXRraW50ZXIuQ1RrRW50cnkod2luZG93LCB0ZXh0dmFyaWFibGU9IiIsIGp1c3RpZnk9ImxlZnQiKSAjdXNlcm5hbWUvcGFzc3dvcmQvVUlEIGJveGVzIGFuZCBsYWJlbHMKICAgIHBhc3N3b3JkQm94PWN1c3RvbXRraW50ZXIuQ1RrRW50cnkod2luZG93LCB0ZXh0dmFyaWFibGU9IiIsIGp1c3RpZnk9ImxlZnQiKQogICAgVUlEQm94PWN1c3RvbXRraW50ZXIuQ1RrRW50cnkod2luZG93LCB0ZXh0dmFyaWFibGU9IiIsIGp1c3RpZnk9ImxlZnQiKQogICAgdXNlcm5hbWVMYWJlbD1jdXN0b210a2ludGVyLkNUa0xhYmVsKHdpbmRvdywgdGV4dD0iVXNlcm5hbWU6IikKICAgIHBhc3N3b3JkTGFiZWw9Y3VzdG9tdGtpbnRlci5DVGtMYWJlbCh3aW5kb3csIHRleHQ9IlBhc3N3b3JkOiIpCiAgICBVSURMYWJlbD1jdXN0b210a2ludGVyLkNUa0xhYmVsKHdpbmRvdywgdGV4dD0iVUlEOiIpCgogICAgZW5jcnlwdEJ1dHRvbj1jdXN0b210a2ludGVyLkNUa0J1dHRvbih3aW5kb3csIHRleHQ9IkVuY3J5cHQiLCBmZ19jb2xvcj0iI2Q4MzNkZSIpICNlbmMvZGVjIGJ1dHRvbnMKICAgIGRlY3J5cHRCdXR0b249Y3VzdG9tdGtpbnRlci5DVGtCdXR0b24od2luZG93LCB0ZXh0PSJEZWNyeXB0IiwgZmdfY29sb3I9IiNkODMzZGUiKQoKICAgIGNoYW5nZVBhc3N3b3JkQnV0dG9uPWN1c3RvbXRraW50ZXIuQ1RrQnV0dG9uKHdpbmRvdywgaGVpZ2h0PTEsIHdpZHRoPTIyLCBib3JkZXJfd2lkdGg9MSwgZmdfY29sb3I9IiNkODMzZGUiLCBjb21tYW5kPSBjaGFuZ2VQYXNzd29yZCwgdGV4dD0iY2hhbmdlUGFzc3dvcmQiLCB0ZXh0X2NvbG9yPSJibGFjayIsIGNvcm5lcl9yYWRpdXM9MiwgYm9yZGVyX3NwYWNpbmc9MTApICNidXR0b25zIHRoYXQgY2FsbCB0aGVpciBuYW1lc2FrZSBmdW5jdGlvbgogICAgY2hhbmdlVXNlcm5hbWVCdXR0b249Y3VzdG9tdGtpbnRlci5DVGtCdXR0b24od2luZG93LCBoZWlnaHQ9MSwgd2lkdGg9MjIsIGJvcmRlcl93aWR0aD0xLCBmZ19jb2xvcj0iI2Q4MzNkZSIsIGNvbW1hbmQ9IGNoYW5nZVVzZXJuYW1lLCB0ZXh0PSJjaGFuZ2VVc2VybmFtZSIsIHRleHRfY29sb3I9ImJsYWNrIiwgY29ybmVyX3JhZGl1cz0yLCBib3JkZXJfc3BhY2luZz0xMCkjIGV2ZXJ5dGhpbmcgb3RoZXIgdGhhbiB0aGUgY29tbWFuZCBpcyBjb3NtZXRpYwogICAgbmV3VXNlckJ1dHRvbj1jdXN0b210a2ludGVyLkNUa0J1dHRvbih3aW5kb3csIGhlaWdodD0xLCB3aWR0aD0xMSwgYm9yZGVyX3dpZHRoPTEsIGZnX2NvbG9yPSIjZDgzM2RlIiwgY29tbWFuZD0gbmV3VXNlciwgdGV4dD0ibmV3VXNlciIsIHRleHRfY29sb3I9ImJsYWNrIiwgY29ybmVyX3JhZGl1cz0yLCBib3JkZXJfc3BhY2luZz0xMCkKICAgIHJlbW92ZVVzZXJCdXR0b249Y3VzdG9tdGtpbnRlci5DVGtCdXR0b24od2luZG93LCBoZWlnaHQ9MSwgd2lkdGg9MTgsIGJvcmRlcl93aWR0aD0xLCBmZ19jb2xvcj0iI2Q4MzNkZSIsIGNvbW1hbmQ9IHJlbW92ZXVzZXIsIHRleHQ9InJlbW92ZXVzZXIiLCB0ZXh0X2NvbG9yPSJibGFjayIsIGNvcm5lcl9yYWRpdXM9MiwgYm9yZGVyX3NwYWNpbmc9MTApCiAgICBnZXRVSURCdXR0b249Y3VzdG9tdGtpbnRlci5DVGtCdXR0b24od2luZG93LCBoZWlnaHQ9MSwgd2lkdGg9MTgsIGJvcmRlcl93aWR0aD0xLCBmZ19jb2xvcj0iI2Q4MzNkZSIsIGNvbW1hbmQ9IGdldFVJRCwgdGV4dD0iZ2V0VUlEIiwgdGV4dF9jb2xvcj0iYmxhY2siLCBjb3JuZXJfcmFkaXVzPTIsIGJvcmRlcl9zcGFjaW5nPTEwKQoKICAgIGtleUJveD1jdXN0b210a2ludGVyLkNUa0VudHJ5KHdpbmRvdywgdGV4dHZhcmlhYmxlPSIiLCBqdXN0aWZ5PSJsZWZ0IikgI3RyaWZpZCBrZXkgYm94L2xhYmVsLCBpbmRlcGVuZGFudCBiZWNhdXNlIHRoYXQgd2F5IGl0IGlzIGtlcHQgd2hlbiB1c2luZyBvdGhlciBtZXRob2RzCiAgICBrZXlMYWJlbD1jdXN0b210a2ludGVyLkNUa0xhYmVsKHdpbmRvdywgdGV4dD0iS2V5OiIpCgogICAgc2hpZnRCb3g9Y3VzdG9tdGtpbnRlci5DVGtFbnRyeSh3aW5kb3csIHRleHR2YXJpYWJsZT0iIiwganVzdGlmeT0ibGVmdCIpICNjYWVzYXIgc2hpZnQKICAgIHNoaWZ0TGFiZWw9Y3VzdG9tdGtpbnRlci5DVGtMYWJlbCh3aW5kb3csIHRleHQ9IlNoaWZ0OiIpCgogICAgcHJpdmF0ZUtleUJveD1jdXN0b210a2ludGVyLkNUa0VudHJ5KHdpbmRvdywgdGV4dHZhcmlhYmxlPSIiLCBqdXN0aWZ5PSJsZWZ0IikKICAgIHByaXZhdGVLZXlMYWJlbD1jdXN0b210a2ludGVyLkNUa0xhYmVsKHdpbmRvdywgdGV4dD0iUHJpdmF0ZSBLZXk6IikgI3ByaXYvcHViIGtleQoKICAgIHB1YmxpY0tleUJveD1jdXN0b210a2ludGVyLkNUa0VudHJ5KHdpbmRvdywgdGV4dHZhcmlhYmxlPSIiLCBqdXN0aWZ5PSJsZWZ0IikKICAgIHB1YmxpY0tleUxhYmVsPWN1c3RvbXRraW50ZXIuQ1RrTGFiZWwod2luZG93LCB0ZXh0PSJQdWJsaWMgS2V5OiIpCgogICAgd2luZG93Lm1haW5sb29wKCk="
#base64 version of the encryption W Tkinter.py, may not keep this super updated
exec(b64.b64decode(code))